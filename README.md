# Cryptography

Few questions that needs to be answered here are?
1. How A can send message to B, so that no one but B can read it? <br />
> A will encrypt message using public key of B. <br />
This ensures that only B will be able to read the message.

2. How will B make sure that it's A that who sent the message? <br />
 A's final message will have two components before encrypting using B's public key,
* Message's actual content (let's call it original content).
* Hashed original content using sha256 (let's say), encrypt this hash with private key of A. (this is signature of A)

 On B's end
* B will decrypt the entire message using his private key.
* Message will contain two parts, original message & signature of A

To verify, whether it's A, who sent message,
* Take signature of A, decrypt using public key of A.
* Compare the above result with hash generated by original message using sha256 at B's end.

# Simple setting

## Setting

|     |   Private  |   Public   |
| :-: | :--------: | :--------: |
|  A  |  pvtA.pem  |  pubA.pem  |
|  B  |  pvtB.pem  |  pubB.pem  |

A and B will exchange their public keys. (It doesn't really matter if anyone else get the public as well) <br />

Generate the key pairs, by doing the following.

1. Generating private keys
```shell
openssl genpkey -algorithm RSA -out pvtA.pem \
&& openssl genpkey -algorithm RSA -out pvtB.pem

```
2. Add private keys to gitignore
```shell
echo "pvtA.pem\npvtB.pem" >> .gitignore
```
3. Generating corresponding public keys
```shell
openssl rsa -pubout -in pvtA.pem -out pubA.pem \
&& openssl rsa -pubout -in pvtA.pem -out pubB.pem
```

## Message sharing

> NOTE: This only works for short messages, as encrypting, decrypting large text is computationally expensive.

A will encrypt the message using B's public key, and send it using internet
```shell
openssl pkeyutl -encrypt -inkey pubB.pem -pubin -in message.txt -out out.bin
```

B will use his private key to decrypt the message
```shell
openssl pkeyutl -decrypt -inkey pvtB.pem -in out.bin -out decryptedmessage.txt
```
Viola, we have successfully sent message.

> NOTE: This does not involve signing the messages.
